---
layout: default
---

<h3>{{ page.title }}</h3>
<p>{{ page.date | date_to_string }} - {{ page.author }}</p>

{{ content }}

<!-- ðŸ§© Cusdis thread element -->
<div id="cusdis_thread"
  data-host="https://cusdis.com"
  data-app-id="2fbd67db-dbaf-4b81-bba1-5193744efb7b"
  data-page-id="{{ page.url }}"
  data-page-url="{{ site.url }}{{ page.url }}"
  data-page-title="{{ page.title }}"
></div>

<!-- âœ… Inject custom CSS into iframe -->
<script>
  window.CUSDIS_LOCALE = 'en';
  window.CUSDIS_CSS = 'https://rabbitreverie.com/assets/css/cusdis-theme.css';

  document.addEventListener('cusdisIframeLoaded', () => {
    const iframe = document.querySelector('#cusdis_thread iframe');
    if (!iframe) return;

    try {
      const srcdoc = iframe.getAttribute('srcdoc');
      if (srcdoc) {
        const updated = srcdoc.replace(
          /<link rel="stylesheet" href="[^"]*style\.css">/,
          `<link rel="stylesheet" href="${window.CUSDIS_CSS}">`
        );
        iframe.setAttribute('srcdoc', updated);
      }
    } catch (e) {
      console.warn('Could not patch Cusdis iframe:', e);
    }
  });

  // load Cusdis script
  const script = document.createElement('script');
  script.src = 'https://cusdis.com/js/cusdis.es.js';
  script.async = true;
  script.defer = true;
  document.body.appendChild(script);
</script>
